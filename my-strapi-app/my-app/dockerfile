# Dockerfile
FROM node:18-slim

ENV NODE_ENV=development \
    HOST=0.0.0.0 \
    PORT=1337

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install production dependencies only
RUN npm install --production --silent

# Build admin
RUN npm run build

# Copy rest of app
COPY . .

# Don't reinstall node_modules â€” just ensure integrity
# Avoid: rm -rf node_modules && npm install

EXPOSE 1337

CMD ["npm", "run", "develop"]
